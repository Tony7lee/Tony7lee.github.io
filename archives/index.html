
<!DOCTYPE html>
<html lang="zh-cn">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Later">
    <title>归档 - Later</title>
    <meta name="author" content="Later">
    
    
        <link rel="icon" href="http://later.tech/assets/images/favicon16.ico">
    
    
    <meta name="description" content="Blog of Later.">
<meta property="og:type" content="blog">
<meta property="og:title" content="Later">
<meta property="og:url" content="http://later.tech/archives/index.html">
<meta property="og:site_name" content="Later">
<meta property="og:description" content="Blog of Later.">
<meta property="og:locale" content="zh-cn">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Later">
<meta name="twitter:description" content="Blog of Later.">
    
    
        
    
    
        <meta property="og:image" content="http://later.tech/assets/images/avatar.jpeg"/>
    
    
    
    
    <!--STYLES-->
    <link rel="stylesheet" href="/assets/css/style-cbrm5pwgnxevif89bflkhuvpvjnvyh6ua2kox6zxzqobmehfeu7nghxl9cbs.min.css">
    <!--STYLES END-->
    
    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    
        
            
        
    

<header id="header" data-behavior="1">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a class="header-title-link" href="/ ">Later</a>
    </div>
    
        
            <a  class="header-right-picture "
                href="#about">
        
        
            <img class="header-picture" src="/assets/images/avatar.jpeg" alt="作者的图片"/>
        
        </a>
    
</header>

            <!-- Define author's picture -->



        
    

<nav id="sidebar" data-behavior="1">
    <div class="sidebar-container">
        
            <div class="sidebar-profile">
                <a href="/#about">
                    <img class="sidebar-profile-picture" src="/assets/images/avatar.jpeg" alt="作者的图片"/>
                </a>
                <h4 class="sidebar-profile-name">Later</h4>
                
                    <h5 class="sidebar-profile-bio"><p>充满期待</p>
</h5>
                
            </div>
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/ "
                            
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-home"></i>
                        <span class="sidebar-button-desc">首页</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/all-categories"
                            
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
                        <span class="sidebar-button-desc">分类</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/all-tags"
                            
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
                        <span class="sidebar-button-desc">标签</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/all-archives"
                            
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-archive"></i>
                        <span class="sidebar-button-desc">Archives</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link open-algolia-search"
                             href="#search"
                            
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-search"></i>
                        <span class="sidebar-button-desc">搜索</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="#about"
                            
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-star-o"></i>
                        <span class="sidebar-button-desc">关于我</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="http://github.com/Tony7lee" target="_blank" rel="noopener">
                    
                        <i class="sidebar-button-icon fa fa-lg fa-github"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="http://stackoverflow.com/users/4902329/later" target="_blank" rel="noopener">
                    
                        <i class="sidebar-button-icon fa fa-lg fa-stack-overflow"></i>
                        <span class="sidebar-button-desc">StackOverflow</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="http://weibo.com/rainlacer" target="_blank" rel="noopener">
                    
                        <i class="sidebar-button-icon fa fa-lg fa-weibo"></i>
                        <span class="sidebar-button-desc">微博</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="mailto:tony7leek@gmail.com" target="_blank" rel="noopener">
                    
                        <i class="sidebar-button-icon fa fa-lg fa-envelope-o"></i>
                        <span class="sidebar-button-desc">邮箱</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="1"
                 class="
                        hasCoverMetaIn
                        ">
                
    <section class="postShorten-group main-content-wrap">
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom" itemscope itemType="http://schema.org/BlogPosting">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title" itemprop="headline">
                    
                        <a class="link-unstyled" href="/2017/08/03/整理了一些不错的polyfill/">
                            整理的一些不错的polyfill
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time itemprop="datePublished" datetime="2017-08-03T15:06:22+08:00">
	
		    2017-08-03
    	
    </time>
    
        <span>发布在 </span>
        
    <a class="category-link" href="/categories/javascript/">javascript</a>


    
</div>

            </div>
            
                <div class="postShorten-content" itemprop="articleBody">
                    <p>开发中不可避免的会处理各种兼容问题，这篇持续整理一些常见的api/es6的polyfill。</p>
<h3 id="Object-create"><a href="#Object-create" class="headerlink" title="Object.create"></a>Object.create</h3><p>使用指定的原型对象和其属性创建了一个新的对象。<br><em>Object.create(proto, [ propertiesObject ])</em></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="built_in">Object</span>.create != <span class="string">'function'</span>) &#123;</div><div class="line">    <span class="comment">// Production steps of ECMA-262, Edition 5, 15.2.3.5</span></div><div class="line">    <span class="comment">// Reference: http://es5.github.io/#x15.2.3.5</span></div><div class="line">    <span class="built_in">Object</span>.create = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="comment">//为了节省内存，使用一个共享的构造器</span></div><div class="line">        <span class="function"><span class="keyword">function</span> <span class="title">Temp</span>(<span class="params"></span>) </span>&#123;&#125;</div><div class="line"></div><div class="line">        <span class="comment">// 使用 Object.prototype.hasOwnProperty 更安全的引用 </span></div><div class="line">        <span class="keyword">var</span> hasOwn = <span class="built_in">Object</span>.prototype.hasOwnProperty;</div><div class="line"></div><div class="line">        <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">O</span>) </span>&#123;</div><div class="line">            <span class="comment">// 1. 如果 O 不是 Object 或 null，抛出一个 TypeError 异常。</span></div><div class="line">            <span class="keyword">if</span> (<span class="keyword">typeof</span> O != <span class="string">'object'</span>) &#123;</div><div class="line">                <span class="keyword">throw</span> <span class="built_in">TypeError</span>(<span class="string">'Object prototype may only be an Object or null'</span>);</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            <span class="comment">// 2. 使创建的一个新的对象为 obj ，就和通过</span></div><div class="line">            <span class="comment">//    new Object() 表达式创建一个新对象一样，</span></div><div class="line">            <span class="comment">//    Object是标准内置的构造器名</span></div><div class="line">            <span class="comment">// 3. 设置 obj 的内部属性 [[Prototype]] 为 O。</span></div><div class="line">            Temp.prototype = O;</div><div class="line">            <span class="keyword">var</span> obj = <span class="keyword">new</span> Temp();</div><div class="line">            Temp.prototype = <span class="literal">null</span>; <span class="comment">// 不要保持一个 O 的杂散引用（a stray reference）...</span></div><div class="line"></div><div class="line">            <span class="comment">// 4. 如果存在参数 Properties ，而不是 undefined ，</span></div><div class="line">            <span class="comment">//    那么就把参数的自身属性添加到 obj 上，就像调用</span></div><div class="line">            <span class="comment">//    携带obj ，Properties两个参数的标准内置函数</span></div><div class="line">            <span class="comment">//    Object.defineProperties() 一样。</span></div><div class="line">            <span class="keyword">if</span> (<span class="built_in">arguments</span>.length &gt; <span class="number">1</span>) &#123;</div><div class="line">                <span class="comment">// Object.defineProperties does ToObject on its first argument.</span></div><div class="line">                <span class="keyword">var</span> Properties = <span class="built_in">Object</span>(<span class="built_in">arguments</span>[<span class="number">1</span>]);</div><div class="line">                <span class="keyword">for</span> (<span class="keyword">var</span> prop <span class="keyword">in</span> Properties) &#123;</div><div class="line">                    <span class="keyword">if</span> (hasOwn.call(Properties, prop)) &#123;</div><div class="line">                        obj[prop] = Properties[prop];</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">              &#125;</div><div class="line"></div><div class="line">              <span class="comment">// 5. 返回 obj</span></div><div class="line">              <span class="keyword">return</span> obj;</div><div class="line">        &#125;;</div><div class="line">    &#125;)();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>

                    
                        
                    
                    
                        <p>
                            <a href="/2017/08/03/整理了一些不错的polyfill/#post-footer" class="postShorten-excerpt_link link">
                                评论和共享
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom" itemscope itemType="http://schema.org/BlogPosting">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title" itemprop="headline">
                    
                        <a class="link-unstyled" href="/2017/08/01/关于这个博客/">
                            关于这个博客
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time itemprop="datePublished" datetime="2017-08-01T15:09:04+08:00">
	
		    2017-08-01
    	
    </time>
    
        <span>发布在 </span>
        
    <a class="category-link" href="/categories/生活/">生活</a>


    
</div>

            </div>
            
                <div class="postShorten-content" itemprop="articleBody">
                    <p>首先，说下今年给自己的主题是<code>充满期待</code>。简单说，就是积极向上的生活，心中有所期待。</p>
<p>在北京工作近三年，回头想想，工作、生活、性格的变化等，都收获颇多。其中难免磨灭一些东西，也会得到一些。辛酸，有，but主旋律一定是充满了快乐。摆几个不错的词：<strong>心存热爱</strong>，<strong>生如夏花</strong>；<strong>以梦为马</strong>，<strong>不负韶华</strong>。<br><img src="http://later.tech/pimg/2017/scenery/beau2.jpeg" alt="img"></p>
<hr>
<p>说正题</p>
<p>博客呢，之前用的阿里云的php服务器，后来…就没后来了…被遗忘到关闭…-_-``</p>
<p>现在重新开一个静态博客，希望在无聊的时候，可以记录一些觉得还不错的东西。</p>
<p>做技术嘛，温故而知新，能有些沉淀，多些总结，一定没错（伸手、摆出机智状）(๑•́ ₃ •̀๑)</p>
<p><img src="http://later.tech/pimg/2017/scenery/beau1.jpeg" alt="img"></p>
<hr>
<p><img src="http://later.tech/pimg/2017/scenery/skyway.jpeg" alt="img"><br>猜猜哪个是我(๑•́ ₃ •̀๑)</p>

                    
                        
                    
                    
                        <p>
                            <a href="/2017/08/01/关于这个博客/#post-footer" class="postShorten-excerpt_link link">
                                评论和共享
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom" itemscope itemType="http://schema.org/BlogPosting">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title" itemprop="headline">
                    
                        <a class="link-unstyled" href="/2015/07/28/浅析Web开发中前端路由实现的几种方式/">
                            浅析Web开发中前端路由实现的几种方式
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time itemprop="datePublished" datetime="2015-07-28T22:32:48+08:00">
	
		    2015-07-28
    	
    </time>
    
        <span>发布在 </span>
        
    <a class="category-link" href="/categories/html5/">html5</a>


    
</div>

            </div>
            
                <div class="postShorten-content" itemprop="articleBody">
                    <p>故事从名叫Oliver的绿箭虾`说起，这位大虾酷爱社交网站，一天他打开了 <a href="https://twitter.com" target="_blank" rel="external">Twitter</a> ，从发过的tweets的选项卡一路切到followers选项卡，Oliver发现页面的内容变化了，URL也变化了，但为什么页面没有闪烁刷新呢？于是Oliver打开的网络监控器（没错，Oliver是个程序员），他惊讶地发现在切换选项卡时，只有几个XHR请求发生，但页面的URL却在对应着变化，这让Oliver不得不去思考这一机制的原因…</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;叙事体故事讲完，进入正题。首先，我们知道传统而经典的Web开发中，服务器端承担了大部分业务逻辑，但随着2.0时代ajax的到来，前端开始担负起更多的数据通信和与之对应的逻辑。</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;在过去，Server端处理来自浏览器的请求时，要根据不同的Url路由，拼接出对应的视图页面，通过Http返回给浏览器进行解析渲染。Server不得不承担这份艰巨的责任，谁叫他是Server，而不是Owner -_-“。为了让Server端更好地把重心放到实现核心逻辑和看守数据宝库，把部分数据交互的逻辑交给前端担负，让前端来分担Server端的压力显得尤为重要，前端也有这个责任和能力。</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;那么问题来了，前端的能力是什么呢，有哪些能力呢？</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;大部分的复杂的网站，都会把业务解耦为模块进行处理。这些网站中又有很多的网站会把适合的部分应用Ajax进行数据交互，展现给用户，很明显处理这样的数据通信交互，不可避免的会涉及到跟URL打交道，让数据交互的变化反映到URL的变化上，进而可以给用户机会去通过保存的URL链接，还原刚才的页面内容板块的布局，这其中包括Ajax局部刷新的变化。</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;通过记录URL来记录web页面板块上Ajax的变化，我们可以称之为 <code>Ajax标签化</code> ，比较好实现可以参考 <code>Pjax</code> 等。而对于较大的framework，我们称之为 路由系统 ，比如<code>AngularJs</code>等。</p>
<hr>
<p>我们先熟悉几个新的H5 history Api：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*Returns the number of entries in the joint session history.*/</span></div><div class="line"><span class="built_in">window</span> . history . length</div><div class="line"></div><div class="line"><span class="comment">/*Returns the current state object.*/</span></div><div class="line"><span class="built_in">window</span> . history . state</div><div class="line"></div><div class="line"><span class="comment">/*Goes back or forward the specified number of steps in the joint session history.A zero delta will reload the current page.If the delta is out of range, does nothing.*/</span></div><div class="line"><span class="built_in">window</span> . history . go( [ delta ])</div><div class="line"></div><div class="line"><span class="comment">/*Goes back one step in the joint session history.If there is no previous page, does nothing.*/</span></div><div class="line"><span class="built_in">window</span> . history . back()</div><div class="line"></div><div class="line"><span class="comment">/*Goes forward one step in the joint session history.If there is no next page, does nothing.*/</span></div><div class="line"><span class="built_in">window</span> . history . forward()</div><div class="line"></div><div class="line"><span class="comment">/*Pushes the given data onto the session history, with the given title, and, if provided and not null, the given URL.*/</span></div><div class="line"><span class="built_in">window</span> . history . pushState(data, title [url])</div><div class="line"></div><div class="line"><span class="comment">/*Updates the current entry in the session history to have the given data, title, and,if provided and not null, URL.*/</span></div><div class="line"><span class="built_in">window</span> . history . replaceState(data, title [url])</div></pre></td></tr></table></figure></p>
<hr>
<p>上边是Mozilla在HTML5中实现的几个History api的官方文档描述，我们先来关注下最后边的两个api， <code>history.pushState</code> 和 <code>history.replaceState</code> ，这两个history新增的api，为前端操控浏览器历史栈提供了可能性：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * parameters</div><div class="line"> * @data &#123;Object&#125; state对象，这是一个javascript对象，一般是JSON格式的对象</div><div class="line"> *                   字面量。</div><div class="line"> * @title &#123;string&#125; 可以理解为document.title，在这里是作为新页面传入参数的。</div><div class="line"> * @url &#123;string&#125; 增加或改变的记录，对应的url，可以是相对路径或者绝对路径，</div><div class="line"> *                  url的具体格式可以自定。</div><div class="line"> */</div><div class="line"></div><div class="line">history.pushState(data, title, url) <span class="comment">// 向浏览器历史栈中增加一条记录。</span></div><div class="line">history.replaceState(data, title, url) <span class="comment">// 替换历史栈中的当前记录。</span></div></pre></td></tr></table></figure>
<p>这两个Api都会操作浏览器的历史栈，而不会引起页面的刷新。不同的是，pushState会增加一条新的历史记录，而replaceState则会替换当前的历史记录。所需的参数相同，在将新的历史记录存入栈后，会把传入的data（即state对象）同时存入，以便以后调用。同时，这俩api都会更新或者覆盖当前浏览器的title和url为对应传入的参数。</p>
<hr>
<p>url参数可以为绝对路径，如： <a href="http://later.tech?name=later">http://later.tech?name=later</a> ，<a href="https://www.later.tech/name/later" target="_blank" rel="external">https://www.later.tech/name/later</a> ；也可以为相对路径： ?name=later ， /name/later ;等等的形式，让我们来在console中做个测试：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//假设当前网页URL为：http://later.tech</span></div><div class="line"><span class="built_in">window</span>.history.pushState(<span class="literal">null</span>, <span class="literal">null</span>, <span class="string">"http://later.tech?name=later"</span>);</div><div class="line"><span class="comment">//url变化：http://later.tech -&gt; http://later.tech?name=later</span></div><div class="line"></div><div class="line"><span class="built_in">window</span>.history.pushState(<span class="literal">null</span>, <span class="literal">null</span>, <span class="string">"http://later.tech/name/later"</span>);</div><div class="line"><span class="comment">//url变化：http://later.tech -&gt; http://later.tech/name/later</span></div><div class="line"></div><div class="line"><span class="built_in">window</span>.history.pushState(<span class="literal">null</span>, <span class="literal">null</span>, <span class="string">"?name=later"</span>);</div><div class="line"><span class="comment">//url变化：http://later.tech -&gt; http://later.tech?name=later</span></div><div class="line"></div><div class="line"><span class="built_in">window</span>.history.pushState(<span class="literal">null</span>, <span class="literal">null</span>, <span class="string">"name=later"</span>);</div><div class="line"><span class="comment">//url变化：http://later.tech -&gt; http://later.tech/name=later</span></div><div class="line"></div><div class="line"><span class="built_in">window</span>.history.pushState(<span class="literal">null</span>, <span class="literal">null</span>, <span class="string">"/name/later"</span>);</div><div class="line"><span class="comment">//url变化：http://later.tech -&gt; http://later.tech/name/later</span></div><div class="line"></div><div class="line"><span class="built_in">window</span>.history.pushState(<span class="literal">null</span>, <span class="literal">null</span>, <span class="string">"name/later"</span>);</div><div class="line"><span class="comment">//url变化：http://later.tech -&gt; http://later.tech/name/later</span></div><div class="line"></div><div class="line"><span class="comment">//错误的用法：</span></div><div class="line"><span class="built_in">window</span>.history.pushState(<span class="literal">null</span>, <span class="literal">null</span>, <span class="string">"http://www.later.tech?name=later"</span>);</div><div class="line"><span class="comment">//error: 由于跨域将产生错误</span></div></pre></td></tr></table></figure>
<p>可以看到，url作为一个改变当前浏览器地址的参数，用法是很灵活的，replaceState和pushState具有和上边测试相同的特性，传入的url如果可能，总会被做适当的处理，这种处理默以”/”相隔，也可以自己指定为”?”等。要注意，这两个api都是不能跨域的！比如在 <a href="http://later.tech">http://later.tech</a> 下，只能在同域下进行调用，如二级域名<a href="http://www.later.tech" target="_blank" rel="external">http://www.later.tech</a> 就会产生错误。没错，我想你已经猜到了前边讲到的Oliver看到URL变化，页面板块变化，页面发出XHR请求，页面没有reload等等特性，都是因此而生！<br>如果有兴趣，你也可以去twitter亲自体验twitter的这一特性，看看他的前端路由系统是如何工作的。<br><code>https://twitter.com/following -&gt; https://twitter.com/followers</code><br>至于api中的data参数，实际上是一个state对象，也即是javascript对象。Firefox的实现中，它们是存在用户的本地硬盘上的，最大支持到640k，如果不够用，按照FF的说法你可以用 sessionStorage or localStorage -_-“。如：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> stateObj = &#123; <span class="attr">foo</span>: <span class="string">"bar"</span> &#125;;</div><div class="line">history.pushState(stateObj, <span class="string">"the blog of Later"</span>, <span class="string">"name = Later"</span>);</div></pre></td></tr></table></figure>
<p>如果当前页面经过这样的过程，历史栈对应的条目，被存入了stateObj，那么我们可以随时主动地取出它，如果页面只是一个普通的历史记录，那么这个state就是null。如：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> currentState = history.state;  <span class="comment">// 如果没有则为null。</span></div></pre></td></tr></table></figure>
<hr>
<p>mozilla有一个应用pushState和replaceState小demo大家可以看一下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE HTML&gt;</span></div><div class="line"><span class="comment">&lt;!-- this starts off as http://example.com/line?x=5 --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>Line Game - 5<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>You are at coordinate <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">"coord"</span>&gt;</span>5<span class="tag">&lt;/<span class="name">span</span>&gt;</span> on the line.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"?x=6"</span> <span class="attr">onclick</span>=<span class="string">"go(1); return false;"</span>&gt;</span>Advance to 6<span class="tag">&lt;/<span class="name">a</span>&gt;</span> or</div><div class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"?x=4"</span> <span class="attr">onclick</span>=<span class="string">"go(-1); return false;"</span>&gt;</span>retreat to 4<span class="tag">&lt;/<span class="name">a</span>&gt;</span>?</div><div class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">     <span class="keyword">var</span> currentPage = <span class="number">5</span>; <span class="comment">// prefilled by server！！！！</span></div><div class="line">     <span class="function"><span class="keyword">function</span> <span class="title">go</span>(<span class="params">d</span>) </span>&#123;</div><div class="line">        setupPage(currentPage + d);</div><div class="line">        history.pushState(currentPage, <span class="built_in">document</span>.title, <span class="string">'?x='</span> + currentPage);</div><div class="line">     &#125;</div><div class="line">     onpopstate = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</div><div class="line">        setupPage(event.state);</div><div class="line">     &#125;</div><div class="line">     <span class="function"><span class="keyword">function</span> <span class="title">setupPage</span>(<span class="params">page</span>) </span>&#123;</div><div class="line">        currentPage = page;</div><div class="line">        <span class="built_in">document</span>.title = <span class="string">'Line Game - '</span> + currentPage;</div><div class="line">        <span class="built_in">document</span>.getElementById(<span class="string">'coord'</span>).textContent = currentPage;</div><div class="line">        <span class="built_in">document</span>.links[<span class="number">0</span>].href = <span class="string">'?x='</span> + (currentPage+<span class="number">1</span>);</div><div class="line">        <span class="built_in">document</span>.links[<span class="number">0</span>].textContent = <span class="string">'Advance to '</span> + (currentPage+<span class="number">1</span>);</div><div class="line">        <span class="built_in">document</span>.links[<span class="number">1</span>].href = <span class="string">'?x='</span> + (currentPage<span class="number">-1</span>);</div><div class="line">        <span class="built_in">document</span>.links[<span class="number">1</span>].textContent = <span class="string">'retreat to '</span> + (currentPage<span class="number">-1</span>);</div><div class="line">     &#125;</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<p>仔细阅读就会看到，这个demo已经快成为一个Ajax标签化或者前端路由系统的雏形了！</p>
<hr>
<p>了解这俩api还不够，再来看下上边的demo中涉及到的 popstate 事件，我担心解释的不到位，所以看看mozilla官方文档的解释：</p>
<blockquote>
<p>An event handler for the popstate event on the window.</p>
<p>A popstate event is dispatched to the window every time the active history entry changes between two history entries for the same document. If the history entry being activated was created by a call to history.pushState() or was affected by a call to history.replaceState(), the popstateevent’s state property contains a copy of the history entry’s state object.</p>
<p>Note that just calling history.pushState() or history.replaceState() won’t trigger apopstate event. The popstate event is only triggered by doing a browser action such as clicking on the back button (or calling history.back() in JavaScript). And the event is only triggered when the user navigates between two history entries for the same document.</p>
<p>Browsers tend to handle the popstate event differently on page load. Chrome (prior to v34) and Safari always emit a popstate event on page load, but Firefox doesn’t.</p>
<p>Syntax<br>    window.onpopstate = funcRef;<br>    //funcRef is a handler function.*</p>
</blockquote>
<p>简而言之，就是说当同一个页面在历史记录间切换时，就会产生popstate事件。正常情况下，如果用户点击后退按钮或者开发者调用：<code>history.back()</code> or <code>history.go()</code>，页面根本就没有处理事件的机会，因为这些操作会使得页面reload。所以popstate只在不会让浏览器页面刷新的历史记录之间切换才能触发，这些历史记录一般由pushState/replaceState或者是由hash锚点等操作产生。并且在事件的句柄中可以访问state对象的引用副本！而且单纯的调用pushState/replaceState并不会触发popstate事件。页面初次加载时，知否会主动触发popstate事件，不同的浏览器实现也不一样。下边是官方的一个demo：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">window</span>.onpopstate = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</div><div class="line"> alert(<span class="string">"location: "</span> + <span class="built_in">document</span>.location + <span class="string">", state: "</span> + <span class="built_in">JSON</span>.stringify(event.state));</div><div class="line">&#125;;</div><div class="line"></div><div class="line">history.pushState(&#123;<span class="attr">page</span>: <span class="number">1</span>&#125;, <span class="string">"title 1"</span>, <span class="string">"?page=1"</span>);</div><div class="line">history.pushState(&#123;<span class="attr">page</span>: <span class="number">2</span>&#125;, <span class="string">"title 2"</span>, <span class="string">"?page=2"</span>);</div><div class="line">history.replaceState(&#123;<span class="attr">page</span>: <span class="number">3</span>&#125;, <span class="string">"title 3"</span>, <span class="string">"?page=3"</span>);</div><div class="line">history.back(); <span class="comment">// alerts "location: http://example.com/example.html?page=1, state: &#123;"page":1&#125;"</span></div><div class="line">history.back(); <span class="comment">// alerts "location: http://example.com/example.html, state: null</span></div><div class="line">history.go(<span class="number">2</span>); <span class="comment">// alerts "location: http://example.com/example.html?page=3, state: &#123;"page":3&#125;</span></div></pre></td></tr></table></figure>
<p>这里便是通过event.state拿到的state的引用副本！</p>
<hr>
<p>H5还新增了一个 hashchange 事件，也是很有用途的一个新事件：</p>
<blockquote>
<p>The ‘hashchange’ event is fired when the fragment identifier of the URL has changed (the part of the URL that follows the # symbol, including the # symbol).</p>
</blockquote>
<p>当页面hash(#)变化时，即会触发hashchange。锚点Hash起到引导浏览器将这次记录推入历史记录栈顶的作用， window.location 对象处理“#”的改变并不会重新加载页面，而是将之当成新页面，放入历史栈里。并且，当前进或者后退或者触发hashchange事件时，我们可以在对应的事件处理函数中注册ajax等操作！</p>
<p>但是hashchange这个事件不是每个浏览器都有，低级浏览器需要用轮询检测URL是否在变化，来检测锚点的变化。当锚点内容(location.hash)被操作时，如果锚点内容发生改变浏览器才会将其放入历史栈中，如果锚点内容没发生变化，历史栈并不会增加，并且也不会触发hashchange事件。</p>
<p>想必你猜到了，这里说的低级浏览器，指的就是可爱的IE了。比如我有一个url从 <a href="http://later.tech#hash_start=1">http://later.tech#hash_start=1</a> 变化到 <a href="http://later.tech#hash_start=2">http://later.tech#hash_start=2</a> ，实现良好的浏览器是会触发一个名为hashchange 的事件，但是对于低版本的IE（稍后我会对具体的兼容性做个总结），我们只能通过设置一个Inerval来不断的轮询url是否发生变化，来判断是否发生了类似hashchange的事件，同时可以声明对应的事件处理函数，从而模拟事件的处理。如下是当浏览器不支持hashchange事件时的模拟方法：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">window</span>) </span>&#123;</div><div class="line">     <span class="comment">// 如果浏览器不支持原生实现的事件，则开始模拟，否则退出。</span></div><div class="line">     <span class="keyword">if</span> ( <span class="string">"onhashchange"</span> <span class="keyword">in</span> <span class="built_in">window</span>.document.body ) &#123; <span class="keyword">return</span>; &#125;</div><div class="line"></div><div class="line">     <span class="keyword">var</span> location = <span class="built_in">window</span>.location,</div><div class="line">     oldURL = location.href,</div><div class="line">     oldHash = location.hash;</div><div class="line"></div><div class="line">     <span class="comment">// 每隔100ms检查hash是否发生变化</span></div><div class="line">     setInterval(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">         <span class="keyword">var</span> newURL = location.href,</div><div class="line">         newHash = location.hash;</div><div class="line"></div><div class="line">         <span class="comment">// hash发生变化且全局注册有onhashchange方法（这个名字是为了和模拟的事件名保持统一）；</span></div><div class="line">         <span class="keyword">if</span> ( newHash != oldHash &amp;&amp; <span class="keyword">typeof</span> <span class="built_in">window</span>.onhashchange === <span class="string">"function"</span>  ) &#123;</div><div class="line">             <span class="comment">// 执行方法</span></div><div class="line">             <span class="built_in">window</span>.onhashchange(&#123;</div><div class="line">                 <span class="attr">type</span>: <span class="string">"hashchange"</span>,</div><div class="line">                 <span class="attr">oldURL</span>: oldURL,</div><div class="line">                 <span class="attr">newURL</span>: newURL</div><div class="line">             &#125;);</div><div class="line"></div><div class="line">             oldURL = newURL;</div><div class="line">             oldHash = newHash;</div><div class="line">         &#125;</div><div class="line">     &#125;, <span class="number">100</span>);</div><div class="line">&#125;)(<span class="built_in">window</span>);</div></pre></td></tr></table></figure>
<p>熟悉了这些新的H5 api，大概对前端路由的实现方式，有了一个小小的模型了。我们来看下兼容性：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"./jquery-1.9.1.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">$(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">if</span>(history &amp;&amp; history.pushState)&#123;</div><div class="line">        alert(<span class="string">"true"</span>);</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        alert(<span class="string">"false"</span>);</div><div class="line">    &#125;</div><div class="line">    $(<span class="built_in">window</span>).on(<span class="string">"hashchange"</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        alert(<span class="string">"hashchange"</span>);</div><div class="line">    &#125;);</div><div class="line">&#125;);</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<hr>
<p>由上边的测试我得出了一些兼容性概览：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">history&amp;&amp;history.pushState兼容如下：</div><div class="line">   chrome true；</div><div class="line">   Firefox true；</div><div class="line">   IE10 true;</div><div class="line">   IE &lt;= 9 false;  </div><div class="line">   PS:ie &lt;= 9既然不支持这些api那就只能采用hash方案，来实现路由系统的兼容了。</div><div class="line"></div><div class="line">hashchange兼容如下：</div><div class="line">   IE9 true;</div><div class="line">   IE8 true;</div><div class="line">   IE7 false;</div><div class="line">   ...</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">页面load时，onhashchange默认触发情况：</div><div class="line">    chrome 需主动trigger才能触发</div><div class="line">    FF 需主动trigger才能触发</div><div class="line">    IE 需主动trigger才能触发</div><div class="line"></div><div class="line">页面load时，onpopstate默认触发情况：</div><div class="line">    chrome &lt; 34版本之前的默认触发 </div><div class="line">    FF 默认不触发</div><div class="line">    IE 默认不触发</div></pre></td></tr></table></figure>
<p>PS：以上是我手动测试的一个大概情况，具体的兼容情况可以去这里测试（<a href="http://caniuse.com/）。" target="_blank" rel="external">http://caniuse.com/）。</a><br>只有webkit内核浏览器才会默认触发 popstate （chrome &gt; 34的可能实现的有问题，safari就很正常）。</p>
<hr>
<p>到这里，说了这么多api， 其实我们对标签化/路由系统应该有了一个大概的了解。如果考虑H5的api，过去facebook和twitter实现路由系统时，约定用”#!”实现，这估计也是一个为了照顾搜索引擎的约定。毕竟前端路由系统涉及到大量的ajx，而这些ajax对应url路径对于搜索引擎来说，是很难匹配起来的。</p>
<p>路由大概的实现过程可以这么理解， 对于高级浏览器，利用H5的新Api做好页面上不同板块ajax等操作与url的映射关系，甚至可以自己用javascript书写一套历史栈管理模块，从而绕过浏览器自己的历史栈。而当用户的操作触发popstate时，可以判断此时的url与板块的映射关系，从而加载对应的ajax板块。这样你就可以把一个具有很复杂ajax版面结构页面的url发送给你的朋友了，而你的朋友在浏览器中打开这个链接时，前端路由系统url和板块映射关系会解析并还原出整个页面的原貌！一般SPA（单页面应用）和一些复杂的社交站应用，会普遍拥有自己的前端路由系统。</p>
<p>看到这里，想必你也想到一个问题，浏览器第一次打开某个链接时，肯定会首先被定向到server端进行路由解析，上边所说的前端路由系统，都是建立在页面已经打开，并且前端可以利用H5等的api拦截下这些URL变化，确保这些URL变化不会发送的server端返回新的页面。但是考虑这种情况，链接是在一个新的浏览器tab中打开的，那么这时候前端就无法拦截下这个url，所以，这就要求serer和前端制定好一个规则，那些url是需要前端解析的，那些url是属于后端的，而server判断出这个url的某部分结构不是自己应该解决的部分时，它就应该意识到，这是前端路由系统的URL部分，需要定向到拥有前端路由系统javascript代码的页面，交给前端处理，比如，nodejs中：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//Express框架的路由访问控制文件server.js，增加路由配置。</span></div><div class="line">app.use(<span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</div><div class="line">    <span class="keyword">if</span>(req.path.indexOf(<span class="string">'/routeForServerSide'</span>) &gt;= <span class="number">0</span>)&#123;</div><div class="line">        res.send(<span class="string">"这里返回的都是server端处理的路由"</span>);</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//比如AngularJS页面</span></div><div class="line">    <span class="keyword">else</span> &#123; </div><div class="line">        res.sendfile(<span class="string">'这里可以将已经配置好angularJS路由的页面返回'</span>);</div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>通过这样的方式，属于前端的路由系统始终可以被正确的交给前端路由系统去handle。对于php，.net也都是类似的配置server路由，给前端路由留下出口即可。</p>
<p>AngularJS框架中路由一般都这样配置：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">app.config([<span class="string">'$routeProvider'</span>, <span class="string">'$locationProvider'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">$routeProvider, $locationProvider</span>) </span>&#123;</div><div class="line">    $routeProvider</div><div class="line">    .when(<span class="string">'/login'</span>, &#123;</div><div class="line">        <span class="attr">templateUrl</span>: <span class="string">'/login.html'</span>,</div><div class="line">        <span class="attr">controller</span>: <span class="string">'LoginController'</span></div><div class="line">    &#125;).otherwise(&#123;</div><div class="line">        <span class="attr">redirectTo</span>: <span class="string">'/homepage'</span></div><div class="line">    &#125;);</div><div class="line">    $locationProvider.html5Mode(<span class="literal">true</span>);</div><div class="line">&#125;])</div></pre></td></tr></table></figure>
<p>可以看到，angular正是将URL、模块模板、模块控制器，进行一个系统的映射，从而实现出一套前端路由系统。这套路由系统默认是以#号开始的，url中锚点#号后边的url即标志着前端路由系统URL部分的开始。这么做是为了照顾到更多浏览器，因为利用hash方案，IE对这套路由系统也会有很好的支持性（前边已经说到，低版本IE对H5的新Api支持不好）。而如果项目压根就不想考虑IE，在Ng中，就可以直接调用 <code>$locationProvider.html5Mode(true)</code>来利用H5的api实现路由系统，从而去掉#号，不用hash方案，这样做URL可能会更美观一些-_-“。<br>正常情况下，URL中的”/”一般是server端路由采用的标记，而”?”或者”#”再或者”#!”，则一般为前端路由采用的开始标记，我们可以在这些符号后边，通过键值对的形式，描述一个页面具有哪些板块配置信息。也不乏有的网站为了美观，前后端共用”/”进行路由索引（比如前边说的twitter）。</p>
<hr>
<p>我们来看两个比较经典的网站：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">1.Sina(新浪)</div><div class="line">作为国内SNS的翘楚，新浪的路由形式也很高大上，比如：</div><div class="line">在FF,Chrome，IE &gt;= 10时新浪的URL是这样的：</div><div class="line"></div><div class="line">http://weibo.com/mygroups?gid=221102230086340215&amp;wvr=5&amp;leftnav=1</div><div class="line"></div><div class="line">PS：可以看到从?号开始就是前端路由了，一大堆的键值对。</div><div class="line"></div><div class="line">在IE&lt;=9时：</div><div class="line"></div><div class="line">http://weibo.com/mygroups?gid=221102230086340215&amp;wvr=5&amp;leftnav=1#!/mygroups?gid=221102230086340215&amp;wvr=5&amp;leftnav=1</div><div class="line"></div><div class="line">PS：仔细观察你会发现，新浪在#!后边把路由段，复制了一遍，这是因为IE低版本不支持H5的新api，因此采用#号的hash方案（比如前边讲到的hashchange或轮询等技术），这样就照顾到所有的浏览器啦~</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">2.Gmail</div><div class="line">作为一款超好用的SPA应用典范中的典范，无论从界面风格还是易用性...好吧不扯了直接说路由：</div><div class="line">收件箱：https://mail.google.com/mail/u/1/#inbox</div><div class="line">星标箱：https://mail.google.com/mail/u/1/#starred</div><div class="line">发件箱：https://mail.google.com/mail/u/1/#sent</div><div class="line">草稿箱：https://mail.google.com/mail/u/1/#drafts</div><div class="line">PS:看到了么，Gmail表示url不是给正常人看的，一律用#来实现前端路由部分，甚是简洁明了（其实挺赞的！）。最重要的是，这种路由方案，兼容性没的说（可能是Gmail很看重IE用户群体）！</div></pre></td></tr></table></figure>
<hr>
<p>最后总结下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">H5+hash方案：兼容所以浏览器，又照顾到了高级浏览器应用新特性。</div><div class="line"></div><div class="line">纯H5方案：表示IE是谁，我不认识-_-&quot;，这套方案应用纯H5的新特性，URL随心定制。</div><div class="line"></div><div class="line">纯Hash方案：其实一开始我是拒绝的，可是...可是...IE~~:(</div></pre></td></tr></table></figure></p>
<p>不论哪种方案，最终的目的都是希望能解决<code>ajax标签化</code>的问题。以上说了这么多，仅仅是分析了这些路由系统大概的实现方式和兼容性解决方案，如果有机会，我会再写一篇文章介绍下主流框架中或者类库中，具体是如何实现这套路由系统的，javascript版本的历史栈管理模块又是怎么样的，实现思路如何。</p>

                    
                        
                    
                    
                        <p>
                            <a href="/2015/07/28/浅析Web开发中前端路由实现的几种方式/#post-footer" class="postShorten-excerpt_link link">
                                评论和共享
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    <div class="pagination-bar">
    <ul class="pagination">
        
        
        <li class="pagination-number">第 1 页 共 1 页</li>
    </ul>
</div>

</section>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2017 Later. All Rights Reserved.
    </span>
</footer>

            </div>
            
        </div>
        


    
        
    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-remove"></i>
        </div>
        
            <img id="about-card-picture" src="/assets/images/avatar.jpeg" alt="作者的图片"/>
        
            <h4 id="about-card-name">Later</h4>
        
            <div id="about-card-bio"><p>充满期待</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>Full-stack web developer</p>

            </div>
        
        
            <div id="about-card-location">
                <i class="fa fa-map-marker"></i>
                <br/>
                Beijing,China
            </div>
        
    </div>
</div>

        <div id="algolia-search-modal" class="modal-container">
    <div class="modal">
        <div class="modal-header">
            <span class="close-button"><i class="fa fa-close"></i></span>
            <a href="https://algolia.com" target="_blank" rel="noopener" class="searchby-algolia text-color-light link-unstyled">
                <span class="searchby-algolia-text text-color-light text-small">by</span>
                <img class="searchby-algolia-logo" src="https://www.algolia.com/static_assets/images/press/downloads/algolia-light.svg">
            </a>
            <i class="search-icon fa fa-search"></i>
            <form id="algolia-search-form">
                <input type="text" id="algolia-search-input" name="search"
                    class="form-control input--large search-input" placeholder="Search "
                    />
            </form>
        </div>
        <div class="modal-body">
            <div class="no-result text-color-light text-center">没有找到文章</div>
            <div class="results">
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="http://later.tech/2015/07/28/浅析Web开发中前端路由实现的几种方式/">
                            <h3 class="media-heading">浅析Web开发中前端路由实现的几种方式</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2015年7月28日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="http://later.tech/2017/08/01/关于这个博客/">
                            <h3 class="media-heading">关于这个博客</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2017年8月1日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="http://later.tech/2017/08/03/整理了一些不错的polyfill/">
                            <h3 class="media-heading">整理的一些不错的polyfill</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2017年8月3日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
            </div>
        </div>
        <div class="modal-footer">
            <p class="results-count text-medium"
                data-message-zero="没有找到文章"
                data-message-one="找到 1 篇文章"
                data-message-other="找到 {n} 篇文章">
                找到 3 篇文章
            </p>
        </div>
    </div>
</div>

        
<div id="cover" style="background-image:url('/assets/images/ly_g17.jpg');"></div>
        <!--SCRIPTS-->
<script src="/assets/js/script-oh15kqvulbd79yf3xk4wuxmdsasjviw4lo819tz6bykeyw7t7dnyglbxvg25.min.js"></script>
<!--SCRIPTS END-->


    </body>
</html>
